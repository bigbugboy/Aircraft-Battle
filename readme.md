## 飞机大战

最近学习了python的面向对象，对面向对象的理解不是很深刻。

面向对象是数据和函数的'打包整理'，将相关数据和处理数据的方法集中在一个地方，方便使用和管理。

本着学习的目的，在网上找了这个飞机大战游戏的素材和相关代码，自己研究学习，加深对面向对象的理解。

python可以做游戏，最基本的一个第三方模块就是**[pygame](https://www.pygame.org/news)**，借助pygame可以实现2D和3D游戏的开发。

下面就开始学习了解对象思想吧，顺便学学pygame，娱乐一下。

![](https://img2020.cnblogs.com/blog/1950650/202005/1950650-20200502120704942-1559307907.gif)

## 游戏需求

~~~python
# 飞机大战
<1> 玩机通过键盘操作我方飞机，我方飞机自动发射初级子弹。
<2> 敌机分三种：小型敌机、中型敌机、大型敌机，区别：速度不同，数量不同，外形不同，血值不同。
<3> 小型敌机速度快，数量多，一颗子弹必杀；大型敌机和中型敌机速度慢，数量少，需要多可子弹才能消灭。
<4> 小型敌机分值低，大型敌机和中型敌机分值高。
<5> 统计玩机得分和最高分记录。
<6> 随着得分的增加，提升游戏等级，增加游戏的难度：增加敌机速度和数量
<7> 任意敌机和我方飞机碰撞，则玩家挑战失败一次；玩家有三次挑战机会。三次机会用完结束游戏。
<8> 我方飞机和敌机毁灭时，动画效果要实现
<9> 游戏中，每隔30s有一次随机空投补给：全屏炸弹或超级子弹。
<10> 游戏开始，玩家自带三颗全屏炸弹,按空格键触发，消灭屏幕内所有敌机；
<11> 使用一次全屏炸弹，数量减一，当玩家的全屏炸弹数少于3颗时，通过空投补给全屏炸弹，最多携带3颗全屏炸弹。
<12> 玩家领到超级子弹时，有18s的使用时间限制；超级子弹发射数量是普通子弹的两倍。
<13> 大型敌机和中型敌机，要显示血量，标识生命值，生命值结束，敌机摧毁，玩机得分。
<14> 玩家可以通过暂停按钮暂停和继续游戏
<15> 游戏有开始界面和结束是否继续的界面。
~~~

## 需求分析

~~~python
# 角色1：我方飞机、敌机(小型敌机、中型敌机、大型敌机)、子弹、补给(全屏炸弹、超级子弹)
# 角色2：设置类、面板类、游戏状态类

- 我方飞机
	- 继承pygame.sprite.Sprite
	- 本地保存设置类对象和 屏幕对象
	- 数据属性：surface\destory_surface\rect\speed\active\invincible\mask
    - 功能属性：上下左右移动、绘制、重置位置

- 敌机（小、中、大）
	- 继承pygame.sprite.Sprite
    - 本地保存设置类对象和 屏幕对象
	- 数据属性：surface\destory_surface\rect\speed\active\hit\mask\energy
    - 功能属性：向下移动、绘制、血槽、重置位置

- 子弹（子弹1、子弹2）
	- 继承pygame.sprite.Sprite
    - 本地保存设置类对象和 屏幕对象
	- 数据属性：surface\rect\speed\active\mask
    - 功能属性：向上移动、绘制、重置位置

- 补给（全屏炸弹、超级子弹）
	- 继承pygame.sprite.Sprite
    - 本地保存设置类对象和 屏幕对象
	- 数据属性：surface\rect\speed\active\mask
    - 功能属性：向下移动、绘制、重置位置

- 设置类
	- 数据属性：游戏基本参数设置
    - 功能属性：游戏加载、暂停、统计得分、补给设置等
    
- 面板类
	- 本地保存设置类对象和 屏幕对象、游戏状态对象
	- 数据属性：分数面板数据、暂停面板数据、全屏炸弹面板数据、玩家生命个数面板数据、开启|结束|继续面板等
    - 功能属性：绘制各种面板数据
    
- 面板类
	- 本地保存设置类对象
	- 数据属性：game_active\game_paused\game_start\game_level\game_score_level
~~~

## 提取功能

> **提取游戏功能背后对应的pygame功能**

- 游戏背景图、背景音乐 - **显示、图片、音效功能**
- 绘制我方飞机、实现移动 - **事件监听功能**
- 绘制敌机
- 我机-敌机碰撞检测 - **碰撞检测功能**
- 我机死亡后重置-5秒无敌模式 - **自定义时间事件**
- 增加普通子弹
- 子弹-敌机碰撞检测
- 绘制血槽能量值 - **几何图形功能**
- 得分统计面板 - **字体功能**
- 全屏炸弹面板功能
- 游戏难度等级
- 游戏暂停-继续 - **光标设置图像功能**
- 空投补给-全屏炸弹和超级子弹 - 自定义时间事件
- 普通子弹和超级子弹的切换 - 自定义时间事件

## 运行环境

~~~python
- win10
- python3.8
- pygame1.9.6
- pycharm2019.3
~~~
